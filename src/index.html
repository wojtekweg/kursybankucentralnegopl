<html>
	<head>
	</head>
	<body>
		<h1>kursybankucentralnego.pl</h1>
		<input type = "date" min="2002-01-02" id = "d1" onchange = "setDate()"></date>
		<span id = "s1"></span>
		<br>
		<br>
		<select id = "c1">
			<option>PLN</option>
		</select>
		<input type = "number" min = "0" step = "0.01" value = "0" id = "n1">
		<select id = "c2">
			<option>PLN</option>
		</select>
		<br>
		<br>
		<input type = "button" value = "Przelicz" onclick = "f()">
		<br>
		<br>
		<input type = "number" min = "0" step = "0.01" value = "0" id = "w1">
		
		<script src = "TableNBP.js"></script>
		<script>
			
			function setDate(){
				actual = new TableNBP(d1.value, ready);
			}
			
			function ready(table){
				if (table[0].effectiveDate != d1.value){
					d1.value = table[0].effectiveDate
					s1.innerHTML = "Data została zmieniona na najnowszą poprzednią dostępną"
				}
				inner = "<option value = \"1\">PLN</option>"
				for (i = 0; i < table[0].rates.length; ++i){
					inner += `<option value = \"${table[0].rates[i].mid}\">${table[0].rates[i].code}</option>`
				}
				c1.innerHTML = c2.innerHTML = inner
			}
			
			function f() {
				w1.value = n1.value * c1.value / c2.value;
			}
			
		</script>
	</body>
</html>